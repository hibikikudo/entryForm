/*====================================================================================================
//////////////////////////////////////////////////////////////////////////////////////////////////////

 author : http://www.yomotsu.net
 thanks : http://css-happylife.com
 created: 2008/02/23
 update : 2009/01/06
 
 public domain
 
 入力されたテキストを自動で指定の形式(半角,全角,ひらがな,全角カタカナ)に変換する JavaScript。
 自動で指定の形式に変換したい input 要素、または textarea 要素の class 属性に
 この JS 内の conf で設定した内容を指定すると動作します。

//////////////////////////////////////////////////////////////////////////////////////////////////////
====================================================================================================*/
var valueConvertor={conf:{asciiClass:"ascii",multibyteClass:"multibyte",hiraganaClass:"hiragana",katakanaClass:"katakana",fullwidthKanaClass:"fullwidth-kana",halfwidthKanaClass:"halfwidth-kana"},main:function(){var c;var b=document.getElementsByTagName("input");var a=document.getElementsByTagName("textarea");for(c in valueConvertor.conf){valueConvertor.conf[c]=new RegExp("\\b"+valueConvertor.conf[c]+"\\b")}for(c=0;c<b.length;c++){try{b[c].addEventListener("blur",valueConvertor.convert,false)}catch(d){b[c].attachEvent("onblur",(function(e){return function(){valueConvertor.convert.call(e)}})(b[c]))}}for(c=0;c<a.length;c++){try{a[c].addEventListener("blur",valueConvertor.convert,false)}catch(d){a[c].attachEvent("onblur",(function(e){return function(){valueConvertor.convert.call(e)}})(a[c]))}}},convert:function(){if(this.className.match(valueConvertor.conf.asciiClass)){this.value=valueConvertor.toAsciiCase(this.value)}else{if(this.className.match(valueConvertor.conf.multibyteClass)){this.value=valueConvertor.toMultibyteCase(this.value)}}if(this.className.match(valueConvertor.conf.hiraganaClass)){this.value=valueConvertor.toZenkanaCase(this.value);this.value=valueConvertor.toHiraganaCase(this.value);this.value=valueConvertor.toPaddingCase(this.value)}else{if(this.className.match(valueConvertor.conf.katakanaClass)){this.value=valueConvertor.toZenkanaCase(this.value);this.value=valueConvertor.toKatakanaCase(this.value);this.value=valueConvertor.toPaddingCase(this.value)}}if(this.className.match(valueConvertor.conf.fullwidthKanaClass)){this.value=valueConvertor.toZenkanaCase(this.value);this.value=valueConvertor.toPaddingCase(this.value)}else{if(this.className.match(valueConvertor.conf.halfwidthKanaClass)){this.value=valueConvertor.toHankanaCase(this.value)}}},toAsciiCase:function(d){var b,a,c=[];for(b=d.length-1;0<=b;b--){a=c[b]=d.charCodeAt(b);switch(true){case (a<=65374&&65281<=a):c[b]-=65248;break;case (a==12288):c[b]=32;break;case (a==12540):c[b]=45;break}}return String.fromCharCode.apply(null,c)},toMultibyteCase:function(d){var b,a,c=[];for(b=d.length-1;0<=b;b--){a=c[b]=d.charCodeAt(b);switch(true){case (a<=126&&33<=a):c[b]+=65248;break;case (a==32):c[b]=12288;break}}return String.fromCharCode.apply(null,c)},toZenkanaCase:function(e){var c,b,a,d=[];a={65382:12530,65383:12449,65384:12451,65385:12453,65386:12455,65387:12457,65388:12515,65389:12517,65390:12519,65391:12483,65392:12540,65393:12450,65394:12452,65395:12454,65396:12456,65397:12458,65398:12459,65399:12461,65400:12463,65401:12465,65402:12467,65403:12469,65404:12471,65405:12473,65406:12475,65407:12477,65408:12479,65409:12481,65410:12484,65411:12486,65412:12488,65413:12490,65414:12491,65415:12492,65416:12493,65417:12494,65418:12495,65419:12498,65420:12501,65421:12504,65422:12507,65423:12510,65424:12511,65425:12512,65426:12513,65427:12514,65428:12516,65429:12518,65430:12520,65431:12521,65432:12522,65433:12523,65434:12524,65435:12525,65436:12527,65437:12531,65438:12443,65439:12444};for(c=e.length-1;0<=c;c--){b=e.charCodeAt(c);if(a[b]){d[c]=a[b]}else{d[c]=b}}return String.fromCharCode.apply(null,d)},toHankanaCase:function(e){var c,b,a,d=[];a={12449:65383,12451:65384,12453:65385,12455:65386,12457:65387,12515:65388,12517:65389,12519:65390,12483:65391,12540:65392,12450:65393,12452:65394,12454:65395,12456:65396,12458:65397,12459:65398,12461:65399,12463:65400,12465:65401,12467:65402,12469:65403,12471:65404,12473:65405,12475:65406,12477:65407,12479:65408,12481:65409,12484:65410,12486:65411,12488:65412,12490:65413,12491:65414,12492:65415,12493:65416,12494:65417,12495:65418,12498:65419,12501:65420,12504:65421,12507:65422,12510:65423,12511:65424,12512:65425,12513:65426,12514:65427,12516:65428,12518:65429,12520:65430,12521:65431,12522:65432,12523:65433,12524:65434,12525:65435,12527:65436,12531:65437,12443:65438,12444:65439,12530:65382};for(c=0;c<e.length;c++){b=e.charCodeAt(c);switch(true){case (b in a):d.push(a[b]);break;case (12459<=b&&b<=12489):d.push(a[b-1],65438);break;case (12495<=b&&b<=12509):d.push(a[b-b%3],[65438,65439][b%3-1]);break;case (12532==b):d.push(65395,65438);break;default:d.push(b);break}}return String.fromCharCode.apply(null,d)},toHiraganaCase:function(d){var b,a,c=[];for(b=d.length-1;0<=b;b--){a=d.charCodeAt(b);c[b]=(12449<=a&&a<=12534)?a-96:a}return String.fromCharCode.apply(null,c)},toKatakanaCase:function(e){var c,b,a,d=[];for(c=e.length-1;0<=c;c--){b=e.charCodeAt(c);if(12353<=b&&b<=12438){d[c]=b+96}else{d[c]=b}}return String.fromCharCode.apply(null,d)},toPaddingCase:function(d){var b,a,c=[];for(b=0;b<d.length;b++){a=d.charCodeAt(b);switch(true){case (12363<=a&&a<=12386&&(a%2==1)):case (12459<=a&&a<=12482&&(a%2==1)):case (12388<=a&&a<=12393&&(a%2==0)):case (12484<=a&&a<=12489&&(a%2==0)):c.push(a+({12443:1}[d.charCodeAt(b+1)]||0));if(c[c.length-1]!=a){b++}break;case (12399<=a&&a<=12415&&(a%3==0)):case (12495<=a&&a<=12509&&(a%3==0)):c.push(a+({12443:1,12444:2}[d.charCodeAt(b+1)]||0));if(c[c.length-1]!=a){b++}break;case (12358==a||12454==a):c.push(a+({12443:78}[d.charCodeAt(b+1)]||0));if(c[c.length-1]!=a){b++}break;default:c.push(a);break}}return String.fromCharCode.apply(null,c)},addEvent:function(){try{window.addEventListener("load",this.main,false)}catch(a){window.attachEvent("onload",this.main)}}};valueConvertor.addEvent();